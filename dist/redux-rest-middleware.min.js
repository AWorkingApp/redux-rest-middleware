/*!
 * redux-rest-middleware
 * A middleware to help make standard CRUD request with redux.
 * 
 * @version v1.0.2
 * @author Charlie Liu<charlie@aworkingapp.com>
 * @homepage undefined
 * @repository git+https://github.com/AWorkingApp/redux-rest-middleware.git
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("redux-rest-middleware",[],t):"object"==typeof exports?exports["redux-rest-middleware"]=t():e["redux-rest-middleware"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){"use strict";var n=r(2),o=r(11),u=Object.prototype.toString;function i(e){return"[object Array]"===u.call(e)}function a(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===u.call(e)}function s(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===u.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===u.call(e)},isFile:function(e){return"[object File]"===u.call(e)},isBlob:function(e){return"[object Blob]"===u.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:s,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,o=arguments.length;n<o;n++)s(arguments[n],r);return t},extend:function(e,t,r){return s(t,function(t,o){e[o]=r&&"function"==typeof t?n(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){"use strict";(function(t){var n=r(0),o=r(14),u={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:("undefined"!=typeof XMLHttpRequest?a=r(3):void 0!==t&&(a=r(3)),a),transformRequest:[function(e,t){return o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){c.headers[e]={}}),n.forEach(["post","put","patch"],function(e){c.headers[e]=n.merge(u)}),e.exports=c}).call(this,r(13))},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(0),o=r(15),u=r(17),i=r(18),a=r(19),c=r(4),s="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(20);e.exports=function(e){return new Promise(function(t,f){var l=e.data,p=e.headers;n.isFormData(l)&&delete p["Content-Type"];var d=new XMLHttpRequest,h="onreadystatechange",y=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||a(e.url)||(d=new window.XDomainRequest,h="onload",y=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var v=e.auth.username||"",m=e.auth.password||"";p.Authorization="Basic "+s(v+":"+m)}if(d.open(e.method.toUpperCase(),u(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[h]=function(){if(d&&(4===d.readyState||y)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in d?i(d.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:r,config:e,request:d};o(t,f,n),d=null}},d.onerror=function(){f(c("Network Error",e,null,d)),d=null},d.ontimeout=function(){f(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},n.isStandardBrowserEnv()){var g=r(21),E=(e.withCredentials||a(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;E&&(p[e.xsrfHeaderName]=E)}if("setRequestHeader"in d&&n.forEach(p,function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete p[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),f(e),d=null)}),void 0===l&&(l=null),d.send(l)})}},function(e,t,r){"use strict";var n=r(16);e.exports=function(e,t,r,o,u){var i=new Error(e);return n(i,t,r,o,u)}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){e.exports=r(10)},function(e,t,r){e.exports=r(9)},function(e,t,r){e.exports=r(29).default},function(e,t,r){"use strict";var n=r(0),o=r(2),u=r(12),i=r(1);function a(e){var t=new u(e),r=o(u.prototype.request,t);return n.extend(r,u.prototype,t),n.extend(r,t),r}var c=a(i);c.Axios=u,c.create=function(e){return a(n.merge(i,e))},c.Cancel=r(6),c.CancelToken=r(27),c.isCancel=r(5),c.all=function(e){return Promise.all(e)},c.spread=r(28),e.exports=c,e.exports.default=c},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";var n=r(1),o=r(0),u=r(22),i=r(23);function a(e){this.defaults=e,this.interceptors={request:new u,response:new u}}a.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),(e=o.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[i,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},o.forEach(["delete","get","head","options"],function(e){a.prototype[e]=function(t,r){return this.request(o.merge(r||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){a.prototype[e]=function(t,r,n){return this.request(o.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=a},function(e,t){var r,n,o=e.exports={};function u(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(e){r=u}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c,s=[],f=!1,l=-1;function p(){f&&c&&(f=!1,c.length?s=c.concat(s):l=-1,s.length&&d())}function d(){if(!f){var e=a(p);f=!0;for(var t=s.length;t;){for(c=s,s=[];++l<t;)c&&c[l].run();l=-1,t=s.length}c=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new h(e,t)),1!==s.length||f||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";var n=r(4);e.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e}},function(e,t,r){"use strict";var n=r(0);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var u;if(r)u=r(t);else if(n.isURLSearchParams(t))u=t.toString();else{var i=[];n.forEach(t,function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),i.push(o(t)+"="+o(e))}))}),u=i.join("&")}return u&&(e+=(-1===e.indexOf("?")?"?":"&")+u),e}},function(e,t,r){"use strict";var n=r(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,u,i={};return e?(n.forEach(e.split("\n"),function(e){if(u=e.indexOf(":"),t=n.trim(e.substr(0,u)).toLowerCase(),r=n.trim(e.substr(u+1)),t){if(i[t]&&o.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}}),i):i}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(){this.message="String contains an invalid character"}o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,r,u=String(e),i="",a=0,c=n;u.charAt(0|a)||(c="=",a%1);i+=c.charAt(63&t>>8-a%1*8)){if((r=u.charCodeAt(a+=.75))>255)throw new o;t=t<<8|r}return i}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,u,i){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(u)&&a.push("domain="+u),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(0);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=o},function(e,t,r){"use strict";var n=r(0),o=r(24),u=r(5),i=r(1),a=r(25),c=r(26);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.baseURL&&!a(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||i.adapter)(e).then(function(t){return s(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return u(t)||(s(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(6);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},e.exports=o},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";r.r(t);var n=r(7),o=r.n(n);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=[],a=[];var c=function(e){return"function"==typeof e||null!==e&&"object"===u(e)};var s=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){if(!c(e))throw new Error("preInteceptor must be a function or a object");!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&arguments[1]};i.push(e)}(e)})},f=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){if(!c(e))throw new Error("postInteceptor must be a function");!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&arguments[1]};a.push(e)}(e)})};var l="REDUX_REST_RESOURCE_GET_RESOURCES",p="REDUX_REST_RESOURCE_GET_RESOURCE",d="REDUX_REST_RESOURCE_POST_RESOURCE",h="REDUX_REST_RESOURCE_PUT_RESOURCE",y="REDUX_REST_RESOURCE_DELETE_RESOURCE",v="REDUX_REST_RESOURCE_CLEAR_RESOURCE_DETAIL",m="REDUX_REST_RESOURCE_CLEAR_RESOURCE_DATA",g="@@/REDUX_REST_RESOURCE/REQUEST_SUCCESS",E="@@/REDUX_REST_RESOURCE/REQUEST_ERROR",b="@@/REDUX_REST_RESOURCE/RUNTIME_ERROR",w="@@/REDUX_REST_RESOURCE/CLEAR_ALL",R={GET:"get",POST:"post",PUT:"put",DELETE:"delete"};function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){T(e,t,r[t])})}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t,r,n,o,u,i){try{var a=e[u](i),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function U(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var u=e.apply(t,r);function i(e){O(u,n,o,i,a,"next",e)}function a(e){O(u,n,o,i,a,"throw",e)}i(void 0)})}}var A=function(e,t,r){if(e.resources&&Array.isArray(e.resources)){var n=!0,o=!1,u=void 0;try{for(var i,a=e.resources[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;if(c.resource===t&&(!c.methods||(Array.isArray(c.methods)&&c.methods.indexOf(r))>-1))return!e.exclude}}catch(e){o=!0,u=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw u}}if(!e.exclude)return!1}return!0};function C(){return _.apply(this,arguments)}function _(){return(_=U(regeneratorRuntime.mark(function e(){var t,r,n,o,u,i,a,c,s,f,l,p,d=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=d.length>0&&void 0!==d[0]?d[0]:[],r=d.length>1&&void 0!==d[1]?d[1]:{},n=d.length>2?d[2]:void 0,o=d.length>3?d[3]:void 0,u=S({},r),i=!0,a=!1,c=void 0,e.prev=8,s=t[Symbol.iterator]();case 10:if(i=(f=s.next()).done){e.next=29;break}if(l=f.value,p=void 0,"function"!=typeof l){e.next=19;break}return e.next=16,l(u,n);case 16:p=e.sent,e.next=25;break;case 19:if(!l||null===l||"object"!==x(l)){e.next=25;break}if("function"!=typeof l.interceptor){e.next=25;break}if(!A(l,n,o)){e.next=25;break}return e.next=24,l.interceptor(u,n);case 24:p=e.sent;case 25:p&&(u=p);case 26:i=!0,e.next=10;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(8),a=!0,c=e.t0;case 35:e.prev=35,e.prev=36,i||null==s.return||s.return();case 38:if(e.prev=38,!a){e.next=41;break}throw c;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return e.abrupt("return",u);case 44:case"end":return e.stop()}},e,null,[[8,31,35,43],[36,,38,42]])}))).apply(this,arguments)}function j(e,t){return D.apply(this,arguments)}function D(){return(D=U(regeneratorRuntime.mark(function e(t,r){var n,u,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i,u=a,c=t.method,e.next=5,C(n,t,r,c);case 5:return s=e.sent,e.abrupt("return",o()(s).then(function(){var e=U(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(u,t,r,c);case 2:return n=e.sent,e.abrupt("return",{data:n.data,status:n.status});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){throw e}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e){return P.apply(this,arguments)}function P(){return(P=U(regeneratorRuntime.mark(function e(t){var r,n,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2?o[2]:void 0,e.next=4,j(S({method:R.GET,url:t},r),n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e){return B.apply(this,arguments)}function B(){return(B=U(regeneratorRuntime.mark(function e(t){var r,n,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2?o[2]:void 0,e.next=4,j(S({method:R.POST,url:t},r),n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(e){return N.apply(this,arguments)}function N(){return(N=U(regeneratorRuntime.mark(function e(t){var r,n,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2?o[2]:void 0,e.next=4,j(S({method:R.PUT,url:t},r),n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function X(e){return I.apply(this,arguments)}function I(){return(I=U(regeneratorRuntime.mark(function e(t){var r,n,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2?o[2]:void 0,e.next=4,j(S({method:R.DELETE,url:t},r),n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function F(e,t,r,n,o){return r?{type:e,resource:t,id:r,options:n,route:o}:{type:e,resource:t,options:n,route:o}}function M(e,t,r,n){return r?{type:g,method:e,resource:t,id:r,payload:n}:{type:g,method:e,resource:t,payload:n}}function H(){return{type:w}}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return F(l,e,void 0,t,r)}function z(e,t,r){return function(e,t,r){return t?{type:E,resource:e,id:t,error:r}:{type:E,resource:e,error:r}}(e,t,r)}function Q(e,t,r){return function(e,t,r){return t?{type:b,resource:e,id:t,error:r}:{type:b,resource:e,error:r}}(e,t,r)}var V={},J={clearAll:H},$={},K={};function W(e){var t=e.resource,r=e.url;V[t]=function(e,t){return{getAll:(i=U(regeneratorRuntime.mark(function r(){var n,o,u,i=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},o=i.length>1&&void 0!==i[1]?i[1]:"",u="".concat(t).concat(o),r.next=5,k(u,n,e);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}},r)})),function(){return i.apply(this,arguments)}),get:(u=U(regeneratorRuntime.mark(function r(n){var o,u,i,a=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=a.length>1&&void 0!==a[1]?a[1]:{},u=a.length>2&&void 0!==a[2]?a[2]:"",i="".concat(t).concat(u,"/").concat(n),r.next=5,k(i,o,e);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}},r)})),function(e){return u.apply(this,arguments)}),post:(o=U(regeneratorRuntime.mark(function r(){var n,o,u,i=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},o=i.length>1&&void 0!==i[1]?i[1]:"",u="".concat(t).concat(o),r.next=5,L(u,n,e);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}},r)})),function(){return o.apply(this,arguments)}),put:(n=U(regeneratorRuntime.mark(function r(n){var o,u,i,a=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=a.length>1&&void 0!==a[1]?a[1]:{},u=a.length>2&&void 0!==a[2]?a[2]:"",i="".concat(t).concat(u,"/").concat(n),r.next=5,q(i,o,e);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}},r)})),function(e){return n.apply(this,arguments)}),delete:(r=U(regeneratorRuntime.mark(function r(n){var o,u,i,a=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=a.length>1&&void 0!==a[1]?a[1]:{},u=a.length>2&&void 0!==a[2]?a[2]:"",i="".concat(t).concat(u,"/").concat(n),r.next=5,X(i,o,e);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}},r)})),function(e){return r.apply(this,arguments)})};var r;var n;var o;var u;var i}(t,r);var n=t[0].toUpperCase()+t.substr(1),o={};J["get".concat(n)]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id,n=e.options,o=e.route;return r?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return F(p,e,t,r,n)}(t,r,n,o):G(t,n,o)},J["getAll".concat(n)]=function(e){var r=e.options,n=e.route;return G(t,r,n)},J["post".concat(n)]=function(e){var r=e.entity,n=e.options,o=e.route;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return r.data=t,F(d,e,void 0,r,n)}(t,r,n,o)},J["put".concat(n)]=function(e){var r=e.id,n=void 0===r?"":r,o=e.entity,u=e.options,i=e.route;return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return n.data=r,F(h,e,t,n,o)}(t,n,o,u,i)},J["delete".concat(n)]=function(e){var r=e.id,n=e.options,o=e.route;return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return F(y,e,t,r,n)}(t,r,n,o)},J["clear".concat(n,"Detail")]=function(){return function(e){return{type:v,resource:e}}(t)},J["clear".concat(n,"Data")]=function(){return function(e){return{type:m,resource:e}}(t)},o["get".concat(n)]=J["get".concat(n)],o["getAll".concat(n)]=J["getAll".concat(n)],o["post".concat(n)]=J["post".concat(n)],o["put".concat(n)]=J["put".concat(n)],o["delete".concat(n)]=J["delete".concat(n)],o["clear".concat(n,"Detail")]=J["clear".concat(n,"Detail")],o["clear".concat(n,"Data")]=J["clear".concat(n,"Data")],$[t]=o,K[t]=Object.assign({},{data:[],detail:{},loading:!1,total:0})}var Y=function(e){e.forEach(function(e){if(!e.url||!e.resource)throw new Error("Resource must have both url and resource specified");W(e)})},Z=J;function ee(){return K}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var re=function e(t){if("object"===te(r=t)?null===r:"function"!=typeof r)return t;var r;if(function(e){return Array.isArray(e)}(t)){var n=[];return t.forEach(function(t){n.push(e(t))}),n}if(function(e){return"function"==typeof e||"[object Object]"===toString.call(e)}(t)){for(var o={},u=Object.keys(t),i=0;i<u.length;i++){var a=u[i];o[a]=e(t[a])}return o}return Object.assign({},t)};function ne(e,t,r){var n={},o=n;t.forEach(function(n,u){u!==t.length-1?(0===u&&void 0!==e[n]?o[n]=re(e[n]):o[n]={},o=o[n]):o[n]=re(r)});var u=re(e);return Object.assign({},u,n)}function oe(e,t,r){return ne(e,[t],r)}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ie(e,t,r[t])})}return e}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ae=function(e,t){try{e&&e.options&&e.options.onSuccess&&"function"==typeof e.options.onSuccess&&e.options.onSuccess(t)}catch(e){}},ce=function(e){return function(e){return function(t){var r,n=(r=t.resource,V[r]),o=function(e,t){return function(r){var n=r.response,o=r.message;try{t&&t.options&&t.options.onSuccess&&"function"==typeof t.options.onSuccess&&t.options.onError(r)}catch(e){}return e(n&&o?z(t.resource,t.id,{status:n.status,message:o,response:n}):Q(t.resource,t.id,r))}}(e,t);switch(e(t),t.type){case p:n.get(t.id,t.options,t.route).then(function(r){return ae(t,r.data),e((n=t.resource,o=t.id,u=r.data,M(R.GET,n,o,u)));var n,o,u},o);break;case l:n.getAll(t.options,t.route).then(function(r){return ae(t,r.data),e((n=t.resource,o=r.data,M(R.GET,n,void 0,o)));var n,o},o);break;case d:n.post(t.options,t.route).then(function(r){return ae(t,r.data),e((n=t.resource,o=r.data,M(R.POST,n,void 0,o)));var n,o},o);break;case h:n.put(t.id,t.options,t.route).then(function(r){return ae(t,r.data),e((n=t.resource,o=t.id,u=r.data,M(R.PUT,n,o,u)));var n,o,u},o);break;case y:n.delete(t.id,t.options,t.route).then(function(r){return ae(t,r.data),e((n=t.resource,o=t.id,u=r.data,M(R.DELETE,n,o,u)));var n,o,u},o)}}}};t.default={ResourcesActions:Z,getResourceActions:function(e,t){var r=$[e],n=e[0].toUpperCase()+e.substr(1),o={};return o["get".concat(n)]=function(e){return t(r["get".concat(n)](e))},o["getAll".concat(n)]=function(e){return t(r["getAll".concat(n)](e))},o["post".concat(n)]=function(e){return t(r["post".concat(n)](e))},o["put".concat(n)]=function(e){return t(r["put".concat(n)](e))},o["delete".concat(n)]=function(e){return t(r["delete".concat(n)](e))},o["clear".concat(n,"Detail")]=function(){return t(r["clear".concat(n,"Detail")]())},o["clear".concat(n,"Data")]=function(){return t(r["clear".concat(n,"Data")]())},o.clearAll=function(){return t(H())},o},ResourcesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re(ue({loading:!1},ee())),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case d:case l:case h:return ne(oe(e,"loading",!0),[t.resource,"loading"],!0);case p:case y:return ne(ne(oe(e,"loading",!0),[t.resource,"loading"],!0),[t.resource,"detail"],{});case g:return function(e,t){var r,n=oe(e,"loading",!1);switch(n=ne(n,[t.resource,"loading"],!1),t.payload.id?r=n[t.resource].data.findIndex(function(e){return"".concat(e.id)==="".concat(t.payload.id)}):t.id&&(r=n[t.resource].data.findIndex(function(e){return"".concat(e.id)==="".concat(t.id)})),t.method){case R.GET:return t.id?ne(n,[t.resource,"detail"],t.payload):ne(n,[t.resource,"data"],t.payload);case R.POST:return ne(n,[t.resource,"data"],n[t.resource].data.concet(t.payload));case R.PUT:return n[t.resource].detail.id!==t.payload.id&&void 0!==n[t.resource].detail.id||(n=ne(n,[t.resource,"detail"],t.payload)),r>-1?ne(n,[t.resource,"data",r],t.payload):ne(n,[t.resource,"data"],n[t.resource].data.concet(t.payload));case R.DELETE:if(r>-1)return(n=ne(n,[t.resource,"detail"],{}))[t.resource].data.splice(r,1),n}return n}(e,t);case E:case b:return ne(oe(e,"loading",!1),[t.resource,"loading"],!1);case m:return ne(e,[t.resource,"data"],[]);case v:return ne(e,[t.resource,"detail"],{});case w:return re(ue({loading:!1},ee()))}return e},createResourceMiddleware:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!Array.isArray(e))throw new Error("Resources should be an array of resources");if(0===e.length)throw new Error("At least one resource is required");if(Y(e),!Array.isArray(t))throw new Error("preInterceptors should be an array of functions");if(s(t),!Array.isArray(r))throw new Error("postInterceptors should be an array of functions");return f(r),ce},METHODS:R,REQUEST_SUCCESS:g,REQUEST_ERROR:E,RUNTIME_ERROR:b}}])});
//# sourceMappingURL=redux-rest-middleware.min.js.map